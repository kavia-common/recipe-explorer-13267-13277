{"is_source_file": true, "format": "Python", "description": "Main FastAPI application source code for the backend of a recipe explorer API, including endpoints for recipes, user registration/login, and favorites management.", "external_files": ["src.api.models", "src.api.schemas"], "external_methods": ["SessionLocal", "init_db", "User", "Recipe", "RecipeRead", "RecipeCreate", "UserCreate", "UserRead"], "published": ["app", "get_password_hash", "verify_password", "authenticate_user"], "classes": [{"name": "FastAPI", "description": "Main application object for the API, configured with title, description, version, and tags."}], "methods": [{"name": "get_db()", "description": "Provides a database session with proper cleanup.", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "Health check endpoint returning a simple message.", "scope": "", "scopeKind": ""}, {"name": "list_or_search_recipes( q: Optional[str] = Query(None, description=\"Search query\"), category: Optional[str] = Query(None, description=\"Filter by category\"), db: Session = Depends(get_db), )", "description": "Returns a list of recipes, filtered by optional search query and category.", "scope": "", "scopeKind": ""}, {"name": "get_recipe(recipe_id: int, db: Session = Depends(get_db))", "description": "Retrieves a specific recipe by ID.", "scope": "", "scopeKind": ""}, {"name": "create_recipe(recipe: RecipeCreate, db: Session = Depends(get_db))", "description": "Creates a new recipe in the database.", "scope": "", "scopeKind": ""}, {"name": "register_user(user: UserCreate, db: Session = Depends(get_db))", "description": "Registers a new user with hashed password.", "scope": "", "scopeKind": ""}, {"name": "login(form_data: OAuth2PasswordRequestForm = Depends(), db: Session = Depends(get_db))", "description": "Authenticates user credentials and returns a demo access token.", "scope": "", "scopeKind": ""}, {"name": "add_to_favorites( recipe_id: int, user_id: int = Query(..., description=\"User ID for favorites\"), db: Session = Depends(get_db) )", "description": "Adds a recipe to a user's list of favorites.", "scope": "", "scopeKind": ""}, {"name": "remove_from_favorites( recipe_id: int, user_id: int = Query(..., description=\"User ID for favorites\"), db: Session = Depends(get_db) )", "description": "Removes a recipe from a user's list of favorites.", "scope": "", "scopeKind": ""}, {"name": "get_favorites(user_id: int, db: Session = Depends(get_db))", "description": "Retrieves all favorite recipes for a given user.", "scope": "", "scopeKind": ""}, {"name": "authenticate_user(db: Session, username: str, password: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_password_hash(password)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "verify_password(plain_password, hashed_password)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["db.query", "db.add", "db.commit", "db.refresh", "db.close", "password_hash", "verify_password", "authenticate_user"], "search-terms": ["FastAPI", "recipes", "users", "favorites", "OAuth2", "CORS", "SQLAlchemy", "schema", "init_db", "auth"], "state": 2, "file_id": 1, "knowledge_revision": 14, "git_revision": "de352e7770979f3597c731dd30756efc0098047e", "revision_history": [{"9": "de352e7770979f3597c731dd30756efc0098047e"}, {"14": "de352e7770979f3597c731dd30756efc0098047e"}], "ctags": [{"_type": "tag", "name": "add_to_favorites", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^def add_to_favorites($/", "language": "Python", "kind": "function", "signature": "( recipe_id: int, user_id: int = Query(..., description=\"User ID for favorites\"), db: Session = Depends(get_db) )"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "authenticate_user", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^def authenticate_user(db: Session, username: str, password: str):$/", "language": "Python", "kind": "function", "signature": "(db: Session, username: str, password: str)"}, {"_type": "tag", "name": "create_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^def create_recipe(recipe: RecipeCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(recipe: RecipeCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^def get_db():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_favorites", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^def get_favorites(user_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(user_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_password_hash", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^def get_password_hash(password):$/", "language": "Python", "kind": "function", "signature": "(password)"}, {"_type": "tag", "name": "get_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^def get_recipe(recipe_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(recipe_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "list_or_search_recipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^def list_or_search_recipes($/", "language": "Python", "kind": "function", "signature": "( q: Optional[str] = Query(None, description=\"Search query\"), category: Optional[str] = Query(None, description=\"Filter by category\"), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^def login(form_data: OAuth2PasswordRequestForm = Depends(), db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(form_data: OAuth2PasswordRequestForm = Depends(), db: Session = Depends(get_db))"}, {"_type": "tag", "name": "oauth2_scheme", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"token\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "pwd_context", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^pwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "register_user", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^def register_user(user: UserCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(user: UserCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "remove_from_favorites", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^def remove_from_favorites($/", "language": "Python", "kind": "function", "signature": "( recipe_id: int, user_id: int = Query(..., description=\"User ID for favorites\"), db: Session = Depends(get_db) )"}, {"_type": "tag", "name": "verify_password", "path": "/home/kavia/workspace/code-generation/recipe-explorer-13267-13277/backend/src/api/main.py", "pattern": "/^def verify_password(plain_password, hashed_password):$/", "language": "Python", "kind": "function", "signature": "(plain_password, hashed_password)"}], "hash": "ee7455277bb4c46c6b3fc2cecbba9e64", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/api/main.py", "fields": [{"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"token\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")", "scope": "", "scopeKind": "", "description": "unavailable"}]}